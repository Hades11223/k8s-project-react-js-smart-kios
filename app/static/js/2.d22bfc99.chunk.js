(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{411:function(t,e,n){var o;o=function(t,e){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e);var o=n(1),r=n.n(o),i=n(0),a=n.n(i);function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,c(e).apply(this,arguments))}var n,i,a;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,o["Component"]),n=e,(i=[{key:"render",value:function(){var t=this,e=this.props,n=e.plusBtnContents,o=e.minusBtnContents,i=e.btnClass,a=e.plusBtnClass,s=e.minusBtnClass,u=e.controlsClass,l=e.scale,c=e.minScale,h=e.maxScale,f=e.onClickPlus,p=e.onClickMinus,d=e.disableZoom,v={width:30,paddingTop:5,marginBottom:5},y=u?void 0:{position:"absolute",right:10,top:10};function m(t){t.preventDefault(),t.target.blur(),d||f()}function b(t){t.preventDefault(),t.target.blur(),d||p()}return r.a.createElement("div",{style:y,className:u},r.a.createElement("div",null,r.a.createElement("button",{ref:function(e){t.plusNode=e},onClick:m,onTouchEnd:m,className:[i||"",a||""].join(" "),type:"button",style:i||a?void 0:v,disabled:d||l>=h},n)),r.a.createElement("div",null,r.a.createElement("button",{ref:function(e){t.minusNode=e},onClick:b,onTouchEnd:b,className:[i||"",s||""].join(" "),type:"button",style:i||s?void 0:v,disabled:d||l<=c},o)))}}])&&u(n.prototype,i),a&&u(n,a),e}();f.propTypes={onClickPlus:a.a.func.isRequired,onClickMinus:a.a.func.isRequired,plusBtnContents:a.a.node,minusBtnContents:a.a.node,btnClass:a.a.string,plusBtnClass:a.a.string,minusBtnClass:a.a.string,controlsClass:a.a.string,scale:a.a.number,minScale:a.a.number,maxScale:a.a.number,disableZoom:a.a.bool},f.defaultProps={plusBtnContents:"+",minusBtnContents:"-",disableZoom:!1};var p=f;function d(t,e,n){return Math.max(t,Math.min(e,n))}function v(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function y(t){return{x:t.clientX,y:t.clientY}}function m(t,e){return function(t,e){var n=t.x-e.x,o=t.y-e.y;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}(y(t),y(e))}var b=!1;try{var g={get passive(){b=!0}};window.addEventListener("test",g,g),window.removeEventListener("test",g,g)}catch(D){b=!1}var S=function(t){return b?{passive:t}:t};function C(t){return(C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function T(t,e,n){return e&&M(t.prototype,e),n&&M(t,n),t}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var k=function(t,e){return e*t-t},O=a.a.shape({x:a.a.number,y:a.a.number}),B=function(t){function e(t){var n,o,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,n=!(r=w(e).call(this,t))||"object"!==C(r)&&"function"!==typeof r?x(o):r;var i,a=t.scale,s=t.defaultScale,u=t.translation,l=t.defaultTranslation,c=t.minScale,h=t.maxScale;return i=void 0!=a?a:void 0!=s?s:1,n.state={scale:d(c,i,h),translation:u||l||{x:0,y:0},shouldPreventTouchEndDefault:!1},n.startPointerInfo=void 0,n.onMouseDown=n.onMouseDown.bind(x(n)),n.onTouchStart=n.onTouchStart.bind(x(n)),n.onMouseMove=n.onMouseMove.bind(x(n)),n.onTouchMove=n.onTouchMove.bind(x(n)),n.onMouseUp=n.onMouseUp.bind(x(n)),n.onTouchEnd=n.onTouchEnd.bind(x(n)),n.onWheel=n.onWheel.bind(x(n)),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,o["Component"]),T(e,null,[{key:"propTypes",get:function(){return{children:a.a.func,scale:a.a.number,translation:O,defaultScale:a.a.number,defaultTranslation:O,disableZoom:a.a.bool,disablePan:a.a.bool,onChange:a.a.func,translationBounds:a.a.shape({xMin:a.a.number,xMax:a.a.number,yMin:a.a.number,yMax:a.a.number}),minScale:a.a.number,maxScale:a.a.number,showControls:a.a.bool,plusBtnContents:a.a.node,minusBtnContents:a.a.node,btnClass:a.a.string,plusBtnClass:a.a.string,minusBtnClass:a.a.string,controlsClass:a.a.string}}},{key:"defaultProps",get:function(){return{minScale:.05,maxScale:3,showControls:!1,translationBounds:{},disableZoom:!1,disablePan:!1}}}]),T(e,[{key:"componentDidMount",value:function(){var t=S(!1);this.getContainerNode().addEventListener("wheel",this.onWheel,t),this.getContainerNode().addEventListener("touchstart",this.onTouchStart,t),this.getContainerNode().addEventListener("mousedown",this.onMouseDown,t),window.addEventListener("touchmove",this.onTouchMove,t),window.addEventListener("mousemove",this.onMouseMove,t);var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){P(t,e,n[e])})}return t}({capture:!0},t);window.addEventListener("touchend",this.onTouchEnd,e),window.addEventListener("mouseup",this.onMouseUp,e)}},{key:"componentWillReceiveProps",value:function(t){var e=void 0!=t.scale?t.scale:this.state.scale,n=t.translation||this.state.translation;n.x==this.state.translation.x&&n.y==this.state.translation.y&&e==this.state.scale||this.setPointerState(),this.setState({scale:d(t.minScale,e,t.maxScale),translation:this.clampTranslation(n,t)})}},{key:"componentWillUnmount",value:function(){this.getContainerNode().removeEventListener("wheel",this.onWheel),this.getContainerNode().removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),this.getContainerNode().removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}},{key:"updateParent",value:function(){if(this.props.onChange){var t=this.state,e=t.scale,n=t.translation;this.props.onChange({scale:e,translation:n})}}},{key:"onMouseDown",value:function(t){t.preventDefault(),this.setPointerState([t])}},{key:"onTouchStart",value:function(t){t.preventDefault(),this.setPointerState(t.touches)}},{key:"onMouseUp",value:function(t){this.setPointerState()}},{key:"onTouchEnd",value:function(t){this.setPointerState(t.touches)}},{key:"onMouseMove",value:function(t){this.startPointerInfo&&!this.props.disablePan&&(t.preventDefault(),this.onDrag(t))}},{key:"onTouchMove",value:function(t){if(this.startPointerInfo){t.preventDefault();var e=this.props,n=e.disablePan,o=e.disableZoom;2==t.touches.length&&this.startPointerInfo.pointers.length>1&&!o?this.scaleFromMultiTouch(t):1===t.touches.length&&this.startPointerInfo&&!n&&this.onDrag(t.touches[0])}}},{key:"onDrag",value:function(t){var e=this,n=this.startPointerInfo,o=n.translation,r=n.pointers[0],i=t.clientX-r.clientX,a=t.clientY-r.clientY,s={x:o.x+i,y:o.y+a},u=Math.abs(i)>1||Math.abs(a)>1;this.setState({translation:this.clampTranslation(s),shouldPreventTouchEndDefault:u},function(){return e.updateParent()})}},{key:"onWheel",value:function(t){if(!this.props.disableZoom){t.preventDefault(),t.stopPropagation();var e=Math.pow(2,.002*t.deltaY),n=d(this.props.minScale,this.state.scale+(1-e),this.props.maxScale),o=this.clientPosToTranslatedPos({x:t.clientX,y:t.clientY});this.scaleFromPoint(n,o)}}},{key:"setPointerState",value:function(t){t&&0!==t.length?this.startPointerInfo={pointers:t,scale:this.state.scale,translation:this.state.translation}:this.startPointerInfo=void 0}},{key:"clampTranslation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,n=t.x,o=t.y,r=e.translationBounds,i=r.xMax,a=r.xMin,s=r.yMax,u=r.yMin;return u=void 0!=u?u:-1/0,s=void 0!=s?s:1/0,{x:d(a=void 0!=a?a:-1/0,n,i=void 0!=i?i:1/0),y:d(u,o,s)}}},{key:"translatedOrigin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.translation,e=this.getContainerBoundingClientRect();return{x:e.left+t.x,y:e.top+t.y}}},{key:"clientPosToTranslatedPos",value:function(t){var e=t.x,n=t.y,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.translation,r=this.translatedOrigin(o);return{x:e-r.x,y:n-r.y}}},{key:"scaleFromPoint",value:function(t,e){var n=this,o=this.state,r=o.translation,i=o.scale,a=t/(0!=i?i:1),s=k(e.x,a),u=k(e.y,a),l={x:r.x-s,y:r.y-u};this.setState({scale:t,translation:this.clampTranslation(l)},function(){return n.updateParent()})}},{key:"scaleFromMultiTouch",value:function(t){var e=this,n=this.startPointerInfo.pointers,o=t.touches,r=m(n[0],n[1]),i=m(o[0],o[1])/r,a=this.startPointerInfo.scale,s=a+(i-1)*a,u=d(this.props.minScale,s,this.props.maxScale),l=v(y(n[0]),y(n[1])),c=v(y(o[0]),y(o[1])),h=c.x-l.x,f=c.y-l.y,p=u/a,b=this.clientPosToTranslatedPos(l,this.startPointerInfo.translation),g=k(b.x,p),S=k(b.y,p),C={x:this.startPointerInfo.translation.x-g+h,y:this.startPointerInfo.translation.y-S+f};this.setState({scale:u,translation:this.clampTranslation(C)},function(){return e.updateParent()})}},{key:"discreteScaleStepSize",value:function(){var t=this.props,e=t.minScale,n=t.maxScale;return Math.abs(n-e)/10}},{key:"changeScale",value:function(t){var e=this.state.scale+t,n=this.props,o=d(n.minScale,e,n.maxScale),r=this.getContainerBoundingClientRect(),i=r.left+r.width/2,a=r.top+r.height/2,s=this.clientPosToTranslatedPos({x:i,y:a});this.scaleFromPoint(o,s)}},{key:"getContainerNode",value:function(){return this.containerNode}},{key:"getContainerBoundingClientRect",value:function(){return this.getContainerNode().getBoundingClientRect()}},{key:"renderControls",value:function(){var t=this,e=this.discreteScaleStepSize();return r.a.createElement(p,{onClickPlus:function(){return t.changeScale(e)},onClickMinus:function(){return t.changeScale(-e)},plusBtnContents:this.props.plusBtnContents,minusBtnContents:this.props.minusBtnContents,btnClass:this.props.btnClass,plusBtnClass:this.props.plusBtnClass,minusBtnClass:this.props.minusBtnClass,controlsClass:this.props.controlsClass,scale:this.state.scale,minScale:this.props.minScale,maxScale:this.props.maxScale,disableZoom:this.props.disableZoom})}},{key:"render",value:function(){var t=this,e=this.props,n=e.showControls,o=e.children,i=this.state.scale,a=this.clampTranslation(this.state.translation),s=function(e){t.state.shouldPreventTouchEndDefault&&(e.preventDefault(),t.setState({shouldPreventTouchEndDefault:!1}))};return r.a.createElement("div",{ref:function(e){t.containerNode=e},style:{height:"100%",width:"100%",position:"relative",touchAction:"none"},onClickCapture:s,onTouchEndCapture:s},o?o({translation:a,scale:i}):void 0,n?this.renderControls():void 0)}}]),e}(),j=function(t){return r.a.createElement(B,t,function(e){var n=e.translation,o=e.scale,i="translate(".concat(n.x,"px, ").concat(n.y,"px) scale(").concat(o,")");return r.a.createElement("div",{style:{height:"100%",width:"100%",position:"relative",overflow:"hidden",touchAction:"none",msTouchAction:"none",cursor:"all-scroll",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"}},r.a.createElement("div",{style:{display:"inline-block",transform:i,transformOrigin:"0 0 "}},t.children))})};n.d(e,"MapInteractionCSS",function(){return j}),n.d(e,"MapInteraction",function(){return B});e.default=B}])},t.exports=o(n(1),n(0))}}]);
//# sourceMappingURL=2.d22bfc99.chunk.js.map